<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éª°å­æ¦‚ç‡åˆ†å¸ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-slate-900 min-h-screen flex flex-col items-center justify-center p-6 text-white">

    <div class="w-full max-w-4xl">
        
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-2xl font-bold flex items-center gap-2 text-yellow-400">
                <span class="text-3xl">ğŸ²</span> Dice Probability
            </h1>
            <a href="./navigation.html" class="text-sm text-slate-500 hover:text-white">Exit</a>
        </header>

        <div class="bg-slate-800 p-6 rounded-3xl shadow-2xl border border-slate-700 mb-8">
            <div class="flex flex-col md:flex-row gap-8 items-center">
                
                <!-- Controls -->
                <div class="w-full md:w-64 space-y-6 shrink-0">
                    <div class="bg-slate-900 p-4 rounded-xl border border-slate-600 text-center">
                        <p class="text-xs text-slate-400 font-bold uppercase mb-1">æŠ•æ·æ¬¡æ•° (Rolls)</p>
                        <p class="text-3xl font-mono text-white font-bold" id="roll-count">0</p>
                    </div>
                    
                    <button onclick="roll(100)" class="w-full py-2 bg-slate-700 hover:bg-slate-600 rounded-lg font-bold text-sm transition">+ 100 æ¬¡</button>
                    <button onclick="roll(1000)" class="w-full py-2 bg-slate-700 hover:bg-slate-600 rounded-lg font-bold text-sm transition">+ 1,000 æ¬¡</button>
                    <button onclick="roll(10000)" class="w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-lg shadow-lg transition transform active:scale-95">+ 10,000 æ¬¡</button>
                    
                    <button onclick="reset()" class="w-full py-2 text-red-400 hover:text-red-300 text-xs font-bold uppercase">é‡ç½®æ•°æ®</button>
                </div>

                <!-- Chart -->
                <div class="flex-1 w-full min-h-[300px]">
                    <canvas id="chart"></canvas>
                </div>

            </div>
        </div>

        <div class="text-center text-xs text-slate-500">
            ç†è®ºä¸Šï¼Œä¸¤é¢—éª°å­ç‚¹æ•°å’Œ (2-12) å‘ˆé‡‘å­—å¡”åˆ†å¸ƒï¼Œ7 çš„æ¦‚ç‡æœ€é«˜ (1/6)ï¼Œ2 å’Œ 12 æœ€ä½ (1/36)ã€‚
        </div>

    </div>

    <script>
        const ctx = document.getElementById('chart').getContext('2d');
        const countEl = document.getElementById('roll-count');
        
        // Sums: 2 to 12. Index 0 unused, 1 unused. Map index to sum.
        // Array size 13.
        let counts = new Array(13).fill(0);
        let totalRolls = 0;
        let myChart;

        function initChart() {
            myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [2,3,4,5,6,7,8,9,10,11,12],
                    datasets: [{
                        label: 'å‡ºç°æ¬¡æ•°',
                        data: [0,0,0,0,0,0,0,0,0,0,0],
                        backgroundColor: '#facc15',
                        borderRadius: 4,
                        hoverBackgroundColor: '#fde047'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { 
                            beginAtZero: true,
                            grid: { color: '#334155' },
                            ticks: { color: '#94a3b8' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#cbd5e1', font: { weight: 'bold' } }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        function roll(n) {
            for(let i=0; i<n; i++) {
                const d1 = Math.floor(Math.random() * 6) + 1;
                const d2 = Math.floor(Math.random() * 6) + 1;
                const sum = d1 + d2;
                counts[sum]++;
            }
            totalRolls += n;
            updateUI();
        }

        function updateUI() {
            countEl.innerText = totalRolls.toLocaleString();
            // Data for chart (slice 2 to 12)
            const data = counts.slice(2);
            myChart.data.datasets[0].data = data;
            myChart.update();
        }

        function reset() {
            counts.fill(0);
            totalRolls = 0;
            updateUI();
        }

        initChart();
    </script>
</body>
</html>