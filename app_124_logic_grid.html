<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€»è¾‘ç½‘æ ¼è°œé¢˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .grid-cell {
            width: 30px;
            height: 30px;
            border: 1px solid #cbd5e1;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
        }

        .grid-cell.true {
            background-color: #86efac;
            color: #166534;
            font-weight: bold;
        }

        .grid-cell.false {
            background-color: #fecaca;
            color: #991b1b;
            font-weight: bold;
        }

        .grid-header {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            font-size: 10px;
            padding: 4px;
            border: none;
        }

        .row-header {
            font-size: 10px;
            padding: 4px;
            text-align: right;
            border: none;
        }

        .thick-right {
            border-right: 2px solid #475569 !important;
        }

        .thick-bottom {
            border-bottom: 2px solid #475569 !important;
        }
    </style>
</head>

<body class="bg-slate-50 min-h-screen p-4 flex flex-col items-center font-sans text-slate-800">

    <header class="w-full max-w-4xl flex justify-between items-center mb-6">
        <h1 class="text-xl font-bold">Logic Grid Puzzle</h1>
        <a href="./navigation.html" class="text-sm text-slate-400 hover:text-blue-600">é€€å‡º</a>
    </header>

    <div class="flex flex-col lg:flex-row gap-8 w-full max-w-6xl items-start">

        <!-- Story & Clues -->
        <div class="w-full lg:w-1/3 bg-white p-6 rounded-xl shadow-sm border border-slate-200">
            <h2 class="font-bold text-lg mb-2">è°å…»äº†é±¼ï¼Ÿ</h2>
            <p class="text-xs text-slate-500 mb-4 leading-relaxed">
                æœ‰ä¸‰ä¸ªé‚»å±…ï¼ˆAlice, Bob, Charlieï¼‰ï¼Œä½åœ¨ä¸åŒé¢œè‰²çš„æˆ¿å­é‡Œï¼ˆçº¢, è“, ç»¿ï¼‰ï¼Œå…»ç€ä¸åŒçš„å® ç‰©ï¼ˆç‹—, çŒ«, é±¼ï¼‰ã€‚
                è¯·æ ¹æ®çº¿ç´¢æ‰¾å‡ºå¯¹åº”å…³ç³»ã€‚
            </p>

            <h3 class="font-bold text-sm text-slate-700 mb-2 mt-4">çº¿ç´¢ (Clues)</h3>
            <ul class="text-xs text-slate-600 space-y-2 list-disc pl-4" id="clues-list">
                <li>Alice ä½åœ¨çº¢æˆ¿å­é‡Œã€‚</li>
                <li>Bob ä¸å…»ç‹—ã€‚</li>
                <li>ä½åœ¨ç»¿æˆ¿å­é‡Œçš„äººå…»é±¼ã€‚</li>
                <li>Charlie ä¸ä½åœ¨ç»¿æˆ¿å­é‡Œã€‚</li>
                <li>å…»çŒ«çš„äººä¸ä½åœ¨è“æˆ¿å­é‡Œã€‚</li>
                <!-- Simplified puzzle for UI demo -->
            </ul>

            <div class="mt-6 p-4 bg-blue-50 rounded-lg text-xs text-blue-700">
                <p>ç‚¹å‡»æ ¼å­æ ‡è®°ï¼š</p>
                <p>ğŸŸ¢ = æ˜¯ (True)</p>
                <p>ğŸ”´ = å¦ (False)</p>
                <p>âšª = æœªçŸ¥</p>
            </div>

            <button onclick="checkSolution()"
                class="mt-4 w-full bg-indigo-600 text-white py-2 rounded-lg font-bold hover:bg-indigo-700 transition">æ£€æŸ¥ç­”æ¡ˆ</button>
            <p id="result-msg" class="text-center text-sm font-bold mt-2 h-5"></p>
        </div>

        <!-- Grid -->
        <div class="flex-1 overflow-auto bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex justify-center">
            <table id="logic-grid" class="border-collapse">
                <!-- Generated by JS -->
            </table>
        </div>

    </div>

    <script>
        const categories = {
            people: ["Alice", "Bob", "Charlie"],
            houses: ["Red", "Blue", "Green"],
            pets: ["Dog", "Cat", "Fish"]
        };

        // Grid Structure:
        // Rows: People
        // Cols: Houses, Pets
        // Also cross-reference Houses vs Pets? Usually full logic grid includes all intersections.
        // People x Houses
        // People x Pets
        // Houses x Pets

        // For simplicity in this demo, we will just render the top 2 blocks (People vs Houses, People vs Pets)
        // A full Einstein grid is complex to render dynamically. Let's do a simplified version:
        // People (Rows) vs [Houses, Pets] (Cols)

        const rowLabels = categories.people;
        const colGroups = [categories.houses, categories.pets];

        // Solution (Hardcoded for demo)
        // Alice: Red, Dog (derived: Red!=Fish, Alice=Red, so Alice!=Fish. Bob!=Dog. So Charlie or Alice dog. )
        // Let's define a valid solution first:
        // Alice: Red, Dog
        // Bob: Blue, Cat
        // Charlie: Green, Fish

        // Let's verify clues:
        // 1. Alice is Red. (OK)
        // 2. Bob not Dog. (OK, Bob is Cat)
        // 3. Green is Fish. (OK, Charlie is Green & Fish)
        // 4. Charlie not Green. (Wait, conflict with 3. Let's change solution)

        // Revised Solution:
        // Alice: Red, Cat
        // Bob: Green, Fish
        // Charlie: Blue, Dog

        // Clues check:
        // 1. Alice Red. (OK)
        // 2. Bob not Dog. (OK)
        // 3. Green is Fish. (OK, Bob is both)
        // 4. Charlie not Green. (OK, is Blue)
        // 5. Cat not Blue. (OK, Cat is Red).

        const solution = {
            "Alice-Red": true, "Alice-Cat": true,
            "Bob-Green": true, "Bob-Fish": true,
            "Charlie-Blue": true, "Charlie-Dog": true
        };

        // All other combinations are false.

        function initGrid() {
            const table = document.getElementById('logic-grid');

            // Header Row
            const headerRow = document.createElement('tr');
            headerRow.appendChild(document.createElement('td')); // Empty corner

            colGroups.forEach((group, gIdx) => {
                group.forEach((label, lIdx) => {
                    const th = document.createElement('th');
                    th.className = "grid-header";
                    th.innerText = label;
                    if (lIdx === group.length - 1 && gIdx !== colGroups.length - 1) th.classList.add('thick-right');
                    headerRow.appendChild(th);
                });
            });
            table.appendChild(headerRow);

            // Data Rows
            rowLabels.forEach((person, rIdx) => {
                const tr = document.createElement('tr');

                // Row Label
                const th = document.createElement('th');
                th.className = "row-header";
                th.innerText = person;
                tr.appendChild(th);

                // Cells
                colGroups.forEach((group, gIdx) => {
                    group.forEach((item, lIdx) => {
                        const td = document.createElement('td');
                        td.className = "grid-cell";
                        td.dataset.key = `${person}-${item}`;
                        td.onclick = () => toggleCell(td);

                        if (lIdx === group.length - 1 && gIdx !== colGroups.length - 1) td.classList.add('thick-right');

                        tr.appendChild(td);
                    });
                });

                table.appendChild(tr);
            });
        }

        function toggleCell(cell) {
            if (cell.classList.contains('true')) {
                cell.className = cell.className.replace('true', 'false');
                cell.innerText = 'X';
            } else if (cell.classList.contains('false')) {
                cell.className = cell.className.replace('false', '');
                cell.innerText = '';
            } else {
                cell.classList.add('true');
                cell.innerText = 'O';
            }
        }

        function checkSolution() {
            const cells = document.querySelectorAll('.grid-cell');
            let correct = true;
            let complete = true;

            cells.forEach(cell => {
                const key = cell.dataset.key;
                const isTrue = solution[key] === true;
                const userTrue = cell.classList.contains('true');
                const userFalse = cell.classList.contains('false');

                // If user marked nothing, it's incomplete
                if (!userTrue && !userFalse) complete = false;

                // Check logic
                if (isTrue && !userTrue) correct = false; // Should be true but isn't
                if (!isTrue && userTrue) correct = false; // Should be false but marked true
                // Note: user marking 'false' on a false cell is correct, but not strictly required for "solution" check usually,
                // but for strict logic puzzle, filling the grid is key.
                // Let's just check the positive assertions (O) matches the solution.
            });

            const msg = document.getElementById('result-msg');
            if (correct && complete) {
                msg.innerText = "ğŸ‰ å®Œå…¨æ­£ç¡®ï¼ä½ è§£å¼€äº†è°œé¢˜ã€‚";
                msg.className = "text-center text-sm font-bold mt-2 h-5 text-green-600";
            } else if (!correct) {
                msg.innerText = "âŒ æœ‰é”™è¯¯ï¼Œè¯·å†æ£€æŸ¥ä¸€ä¸‹çº¿ç´¢ã€‚";
                msg.className = "text-center text-sm font-bold mt-2 h-5 text-red-600";
            } else {
                msg.innerText = "â³ å°šæœªå®Œæˆæ‰€æœ‰æ ‡è®°ã€‚";
                msg.className = "text-center text-sm font-bold mt-2 h-5 text-yellow-600";
            }
        }

        initGrid();
    </script>
</body>

</html>