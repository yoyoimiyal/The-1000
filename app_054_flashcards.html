<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>闪卡记忆卡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-scene {
            perspective: 1000px;
            height: 300px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .card.is-flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .card-front {
            background: white;
            color: #1e293b;
        }

        .card-back {
            background: #4f46e5;
            color: white;
            transform: rotateY(180deg);
        }
    </style>
</head>

<body class="bg-indigo-50 min-h-screen flex flex-col items-center p-6">

    <header class="w-full max-w-lg flex justify-between items-center mb-8">
        <h1 class="text-2xl font-bold text-indigo-900">Flashcards</h1>
        <div class="text-sm text-slate-500">
            <span id="current-idx">1</span> / <span id="total-count">3</span>
        </div>
    </header>

    <!-- Card Area -->
    <div class="w-full max-w-lg card-scene mb-8">
        <div class="card" id="card" onclick="flipCard()">
            <div class="card-face card-front">
                <span class="text-xs font-bold text-slate-400 uppercase mb-4">Question</span>
                <h2 class="text-3xl font-bold text-center" id="q-text">Apple</h2>
                <p class="text-sm text-slate-400 mt-8">(点击翻转)</p>
            </div>
            <div class="card-face card-back">
                <span class="text-xs font-bold text-indigo-200 uppercase mb-4">Answer</span>
                <h2 class="text-3xl font-bold text-center" id="a-text">苹果</h2>
            </div>
        </div>
    </div>

    <!-- Controls -->
    <div class="flex gap-4 mb-12">
        <button onclick="prevCard()"
            class="bg-white hover:bg-gray-50 text-indigo-600 px-6 py-3 rounded-full shadow font-bold transition">←
            上一张</button>
        <button onclick="nextCard()"
            class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-full shadow font-bold transition">下一张
            →</button>
    </div>

    <!-- Editor -->
    <div class="w-full max-w-lg border-t border-indigo-200 pt-8">
        <h3 class="font-bold text-slate-700 mb-4">添加新卡片</h3>
        <div class="flex gap-2 mb-2">
            <input type="text" id="new-q" placeholder="正面 (问题)"
                class="flex-1 p-3 rounded-lg border border-slate-300 outline-none focus:border-indigo-500">
            <input type="text" id="new-a" placeholder="背面 (答案)"
                class="flex-1 p-3 rounded-lg border border-slate-300 outline-none focus:border-indigo-500">
        </div>
        <button onclick="addCard()"
            class="w-full bg-indigo-100 text-indigo-700 font-bold py-2 rounded-lg hover:bg-indigo-200 transition">添加</button>
        <div class="text-center mt-4">
            <a href="./navigation.html" class="text-sm text-slate-400 hover:text-indigo-600">退出</a>
        </div>
    </div>

    <script>
        const card = document.getElementById('card');
        const qText = document.getElementById('q-text');
        const aText = document.getElementById('a-text');
        const currentIdxEl = document.getElementById('current-idx');
        const totalCountEl = document.getElementById('total-count');

        let decks = JSON.parse(localStorage.getItem('my_flashcards') || '[{"q":"Apple","a":"苹果"},{"q":"Banana","a":"香蕉"},{"q":"Water","a":"水"}]');
        let currentIndex = 0;

        function updateUI() {
            totalCountEl.innerText = decks.length;
            currentIdxEl.innerText = currentIndex + 1;

            // Reset flip
            card.classList.remove('is-flipped');

            // Update content after short delay to allow flip reset if needed, but instant is fine
            setTimeout(() => {
                qText.innerText = decks[currentIndex].q;
                aText.innerText = decks[currentIndex].a;
            }, 150);
        }

        function flipCard() {
            card.classList.toggle('is-flipped');
        }

        function nextCard() {
            if (currentIndex < decks.length - 1) {
                currentIndex++;
                updateUI();
            } else {
                // Loop back?
                currentIndex = 0;
                updateUI();
            }
        }

        function prevCard() {
            if (currentIndex > 0) {
                currentIndex--;
                updateUI();
            }
        }

        function addCard() {
            const q = document.getElementById('new-q').value;
            const a = document.getElementById('new-a').value;
            if (q && a) {
                decks.push({ q, a });
                localStorage.setItem('my_flashcards', JSON.stringify(decks));
                document.getElementById('new-q').value = '';
                document.getElementById('new-a').value = '';
                // Go to new card
                currentIndex = decks.length - 1;
                updateUI();
            }
        }

        // Init
        updateUI();
    </script>
</body>

</html>