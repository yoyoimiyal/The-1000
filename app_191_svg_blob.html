<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blob å½¢çŠ¶ç”Ÿæˆå™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col md:flex-row items-center justify-center p-6 text-slate-800">

    <!-- Preview -->
    <div class="flex-1 flex items-center justify-center relative w-full h-[50vh] md:h-screen overflow-hidden">
        <div id="blob-container"
            class="transition-all duration-500 ease-in-out transform hover:scale-105 cursor-pointer"
            onclick="regenerate()">
            <!-- SVG injected here -->
        </div>
        <p class="absolute bottom-8 text-slate-400 text-xs font-bold uppercase tracking-widest pointer-events-none">
            Click to Regenerate</p>
    </div>

    <!-- Controls -->
    <div class="w-full md:w-80 bg-white p-8 rounded-3xl shadow-xl border border-gray-100 z-10">

        <header class="flex justify-between items-center mb-8">
            <h1 class="text-2xl font-bold text-indigo-600 flex items-center gap-2">
                <span class="text-3xl">ğŸ¦ </span> Blob Maker
            </h1>
            <a href="./navigation.html" class="text-sm text-slate-400 hover:text-indigo-600">é€€å‡º</a>
        </header>

        <div class="space-y-6">

            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">å¤æ‚åº¦ (Complexity)</label>
                <div class="flex gap-4 items-center">
                    <input type="range" id="complexity" min="2" max="10" value="4"
                        class="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-500"
                        oninput="generateBlob()">
                    <span id="val-complexity" class="text-sm font-bold w-4">4</span>
                </div>
            </div>

            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">å¯¹æ¯”åº¦ (Contrast)</label>
                <div class="flex gap-4 items-center">
                    <input type="range" id="contrast" min="1" max="10" value="6"
                        class="flex-1 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-pink-500"
                        oninput="generateBlob()">
                    <span id="val-contrast" class="text-sm font-bold w-4">6</span>
                </div>
            </div>

            <div>
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">é¢œè‰² (Color)</label>
                <div class="flex gap-2">
                    <button onclick="setColor('#6366f1')"
                        class="w-8 h-8 rounded-full bg-indigo-500 hover:scale-110 transition"></button>
                    <button onclick="setColor('#ec4899')"
                        class="w-8 h-8 rounded-full bg-pink-500 hover:scale-110 transition"></button>
                    <button onclick="setColor('#10b981')"
                        class="w-8 h-8 rounded-full bg-emerald-500 hover:scale-110 transition"></button>
                    <button onclick="setColor('#f59e0b')"
                        class="w-8 h-8 rounded-full bg-amber-500 hover:scale-110 transition"></button>
                    <button onclick="setColor('#3b82f6')"
                        class="w-8 h-8 rounded-full bg-blue-500 hover:scale-110 transition"></button>
                    <input type="color" id="custom-color" value="#6366f1"
                        class="w-8 h-8 rounded-full p-0 border-0 overflow-hidden cursor-pointer"
                        oninput="generateBlob()">
                </div>
            </div>

            <div class="pt-4 border-t border-slate-100">
                <label class="block text-xs font-bold text-slate-400 uppercase mb-2">SVG Code</label>
                <div class="bg-slate-800 text-green-400 p-3 rounded-xl text-[10px] font-mono break-all h-24 overflow-y-auto cursor-pointer hover:bg-slate-700 transition relative group"
                    onclick="copySVG()">
                    <code id="svg-code">...</code>
                    <div class="absolute top-2 right-2 text-white/50 group-hover:text-white">Copy</div>
                </div>
            </div>

            <button onclick="regenerate()"
                class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg transition">
                éšæœºç”Ÿæˆ
            </button>

        </div>

    </div>

    <script>
        let size = 400;
        const container = document.getElementById('blob-container');
        const codeEl = document.getElementById('svg-code');
        const colInput = document.getElementById('custom-color');

        function setColor(hex) {
            colInput.value = hex;
            generateBlob();
        }

        function regenerate() {
            generateBlob();
        }

        function generateBlob() {
            const complexity = parseInt(document.getElementById('complexity').value);
            const contrast = parseInt(document.getElementById('contrast').value);
            const color = colInput.value;

            document.getElementById('val-complexity').innerText = complexity;
            document.getElementById('val-contrast').innerText = contrast;

            const path = createBlobPath(size, complexity, contrast);
            const svg = `
<svg viewBox="0 0 ${size} ${size}" xmlns="http://www.w3.org/2000/svg">
  <path fill="${color}" d="${path}" />
</svg>`;

            container.innerHTML = svg;
            codeEl.innerText = svg.trim();
        }

        function createBlobPath(size, complexity, contrast) {
            const center = size / 2;
            const points = [];
            const count = 3 + complexity;
            const angleStep = (Math.PI * 2) / count;

            // Generate points
            for (let i = 0; i < count; i++) {
                const angle = i * angleStep;
                // Random radius based on contrast
                // Base radius 40% of size. Variation +/- contrast * 2%
                const baseR = size * 0.35;
                const variation = (Math.random() - 0.5) * (contrast / 10) * size * 0.4;
                const r = baseR + variation;

                const x = center + Math.cos(angle) * r;
                const y = center + Math.sin(angle) * r;
                points.push({ x, y });
            }

            // Catmull-Rom spline to SVG Path (simplified to quadratic bezier through midpoints)
            // Or simple cubic bezier loop

            // We use the midpoint method for smoothing closed loops
            let d = "";
            const len = points.length;

            // Start at midpoint between last and first
            const startX = (points[len - 1].x + points[0].x) / 2;
            const startY = (points[len - 1].y + points[0].y) / 2;

            d += `M ${startX.toFixed(1)} ${startY.toFixed(1)}`;

            for (let i = 0; i < len; i++) {
                const p1 = points[i];
                const p2 = points[(i + 1) % len];
                const midX = (p1.x + p2.x) / 2;
                const midY = (p1.y + p2.y) / 2;

                // Quad bezier to midpoint
                d += ` Q ${p1.x.toFixed(1)} ${p1.y.toFixed(1)} ${midX.toFixed(1)} ${midY.toFixed(1)}`;
            }

            d += " Z";
            return d;
        }

        function copySVG() {
            navigator.clipboard.writeText(codeEl.innerText);
            alert("SVG ä»£ç å·²å¤åˆ¶!");
        }

        // Init
        generateBlob();
    </script>
</body>

</html>