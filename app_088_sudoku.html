<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊØèÊó•Êï∞Áã¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sudoku-cell {
            width: 100%;
            aspect-ratio: 1;
            border: 1px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            color: #334155;
        }

        .sudoku-cell:nth-child(3n) {
            border-right: 2px solid #64748b;
        }

        .sudoku-cell:nth-child(9n) {
            border-right: 1px solid #cbd5e1;
        }

        /* Reset right edge */
        /* Row Borders handling via JS or specialized grid is easier */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            border: 2px solid #475569;
        }

        .cell-fixed {
            background-color: #f1f5f9;
            color: #0f172a;
        }

        .cell-selected {
            background-color: #bbf7d0 !important;
        }

        .cell-highlight {
            background-color: #e2e8f0;
        }

        .cell-error {
            color: #ef4444;
        }

        /* Bottom borders for 3x3 blocks */
        .bb-thick {
            border-bottom: 2px solid #64748b;
        }
    </style>
</head>

<body class="bg-slate-100 min-h-screen flex flex-col items-center justify-center p-4 select-none">

    <div class="w-full max-w-md">

        <header class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold text-slate-800">Sudoku Daily</h1>
            <div class="flex gap-2">
                <button onclick="newGame()"
                    class="text-xs bg-slate-200 hover:bg-slate-300 px-3 py-1 rounded text-slate-700 font-bold transition">Êñ∞Ê∏∏Êàè</button>
                <a href="./navigation.html" class="text-xs text-slate-400 hover:text-slate-600 px-2 py-1">ÈÄÄÂá∫</a>
            </div>
        </header>

        <!-- Board -->
        <div id="board" class="grid-container bg-white shadow-xl mb-6">
            <!-- Cells injected here -->
        </div>

        <!-- Numpad -->
        <div class="grid grid-cols-5 gap-2">
            <button onclick="inputNum(1)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">1</button>
            <button onclick="inputNum(2)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">2</button>
            <button onclick="inputNum(3)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">3</button>
            <button onclick="inputNum(4)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">4</button>
            <button onclick="inputNum(5)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">5</button>
            <button onclick="inputNum(6)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">6</button>
            <button onclick="inputNum(7)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">7</button>
            <button onclick="inputNum(8)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">8</button>
            <button onclick="inputNum(9)"
                class="h-12 bg-white rounded shadow text-xl font-bold text-slate-700 hover:bg-indigo-50 transition">9</button>
            <button onclick="inputNum(null)"
                class="h-12 bg-red-50 rounded shadow text-sm font-bold text-red-500 hover:bg-red-100 transition">Del</button>
        </div>

    </div>

    <script>
        const boardEl = document.getElementById('board');
        let selectedCellIndex = null;

        // Simple valid solved board seed
        const baseSolution = [
            5, 3, 4, 6, 7, 8, 9, 1, 2,
            6, 7, 2, 1, 9, 5, 3, 4, 8,
            1, 9, 8, 3, 4, 2, 5, 6, 7,
            8, 5, 9, 7, 6, 1, 4, 2, 3,
            4, 2, 6, 8, 5, 3, 7, 9, 1,
            7, 1, 3, 9, 2, 4, 8, 5, 6,
            9, 6, 1, 5, 3, 7, 2, 8, 4,
            2, 8, 7, 4, 1, 9, 6, 3, 5,
            3, 4, 5, 2, 8, 6, 1, 7, 9
        ];

        let currentPuzzle = [];
        let currentSolution = [];
        let userInput = [];

        function newGame() {
            // For variety, we should permute the base solution (swap rows/cols/numbers)
            // For this mini-app, we'll just use the base and mask numbers.
            // Deep copy
            currentSolution = [...baseSolution];

            // Mask random cells (Easy mode: remove ~30)
            currentPuzzle = currentSolution.map(val => (Math.random() > 0.4) ? val : null);
            userInput = Array(81).fill(null);

            renderBoard();
        }

        function renderBoard() {
            boardEl.innerHTML = '';
            for (let i = 0; i < 81; i++) {
                const cell = document.createElement('div');
                cell.className = 'sudoku-cell';

                // Add thick bottom border for rows 2, 5 (indices 18-26, 45-53)
                const row = Math.floor(i / 9);
                if (row === 2 || row === 5) cell.classList.add('bb-thick');

                if (currentPuzzle[i] !== null) {
                    cell.innerText = currentPuzzle[i];
                    cell.classList.add('cell-fixed');
                } else {
                    // User input
                    if (userInput[i]) {
                        cell.innerText = userInput[i];
                        // Simple error check
                        if (userInput[i] !== currentSolution[i]) {
                            cell.classList.add('cell-error');
                        } else {
                            cell.classList.add('text-indigo-600');
                        }
                    }
                    cell.onclick = () => selectCell(i);
                }

                cell.id = `cell-${i}`;
                boardEl.appendChild(cell);
            }
            selectedCellIndex = null;
        }

        function selectCell(index) {
            // Clear previous selection
            document.querySelectorAll('.cell-selected').forEach(el => el.classList.remove('cell-selected'));

            selectedCellIndex = index;
            document.getElementById(`cell-${index}`).classList.add('cell-selected');

            // Highlight same numbers (Optional polish)
        }

        function inputNum(num) {
            if (selectedCellIndex === null) return;

            userInput[selectedCellIndex] = num;
            renderBoard(); // Re-render to show updates and validations

            // Re-select to keep focus feeling
            selectCell(selectedCellIndex);

            checkWin();
        }

        function checkWin() {
            // If all filled and correct
            let isFull = true;
            for (let i = 0; i < 81; i++) {
                const val = currentPuzzle[i] !== null ? currentPuzzle[i] : userInput[i];
                if (!val || val !== currentSolution[i]) {
                    isFull = false;
                    break;
                }
            }

            if (isFull) {
                setTimeout(() => alert("üéâ ÊÅ≠ÂñúÔºÅÊï∞Áã¨ÂÆåÊàêÔºÅ"), 100);
            }
        }

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (selectedCellIndex === null) return;
            if (e.key >= '1' && e.key <= '9') {
                inputNum(parseInt(e.key));
            } else if (e.key === 'Backspace' || e.key === 'Delete') {
                inputNum(null);
            }
        });

        // Init
        newGame();
    </script>
</body>

</html>