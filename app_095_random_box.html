<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>随机决策箱</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .coin {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #fbbf24;
            border: 4px solid #d97706;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: #b45309;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.5), 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 1s ease-out;
            transform-style: preserve-3d;
        }

        .animate-flip {
            animation: flip 1s ease-out forwards;
        }

        @keyframes flip {
            0% {
                transform: rotateY(0);
            }

            100% {
                transform: rotateY(1800deg);
            }

            /* 5 spins */
        }

        .card-bg {
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 10px 10px;
        }
    </style>
</head>

<body class="bg-slate-50 min-h-screen p-4 flex flex-col items-center justify-center font-sans">

    <div class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-6">

        <!-- Coin Flip -->
        <div
            class="bg-white p-8 rounded-3xl shadow-lg flex flex-col items-center justify-between min-h-[300px] border border-slate-100 card-bg">
            <h2 class="text-xl font-bold text-slate-700 mb-4">抛硬币 (Coin Flip)</h2>

            <div id="coin" class="coin mb-6">?</div>
            <div class="h-8 text-slate-500 font-bold" id="coin-result">点击抛掷</div>

            <button onclick="flipCoin()"
                class="px-8 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-bold rounded-full shadow transition transform active:scale-95">抛出</button>
        </div>

        <!-- Random Number -->
        <div
            class="bg-white p-8 rounded-3xl shadow-lg flex flex-col items-center justify-between min-h-[300px] border border-slate-100 card-bg">
            <h2 class="text-xl font-bold text-slate-700 mb-4">随机数 (RNG)</h2>

            <div class="text-6xl font-mono font-bold text-indigo-600 mb-6" id="rng-result">0</div>

            <div class="flex gap-2 items-center w-full mb-4">
                <input type="number" id="min" value="1" class="w-full p-2 border border-slate-200 rounded text-center">
                <span class="text-slate-400">-</span>
                <input type="number" id="max" value="100"
                    class="w-full p-2 border border-slate-200 rounded text-center">
            </div>

            <button onclick="genNumber()"
                class="px-8 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-full shadow transition transform active:scale-95">生成</button>
        </div>

        <!-- Custom Draw -->
        <div
            class="bg-white p-8 rounded-3xl shadow-lg flex flex-col items-center justify-between min-h-[300px] border border-slate-100 md:col-span-2 card-bg">
            <h2 class="text-xl font-bold text-slate-700 mb-4">幸运抽签 (Lucky Draw)</h2>

            <div id="draw-display" class="text-4xl font-bold text-slate-800 h-16 flex items-center justify-center">?
            </div>

            <textarea id="draw-options"
                class="w-full h-24 p-3 border border-slate-200 rounded-xl mb-4 text-sm resize-none focus:ring-2 focus:ring-emerald-500 outline-none bg-white/80"
                placeholder="输入选项，用逗号分隔 (例如: 吃饭, 睡觉, 打豆豆)"></textarea>

            <button onclick="drawItem()"
                class="px-10 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-bold rounded-full shadow-lg transition transform active:scale-95">开始抽取</button>
        </div>

    </div>

    <div class="mt-8">
        <a href="./navigation.html" class="text-sm text-slate-400 hover:text-slate-600">返回导航</a>
    </div>

    <script>
        // Coin
        function flipCoin() {
            const coin = document.getElementById('coin');
            const resEl = document.getElementById('coin-result');

            // Reset anim
            coin.style.animation = 'none';
            coin.offsetHeight; /* reflow */
            coin.style.animation = 'flip 0.5s ease-out forwards'; // Faster spin
            resEl.innerText = "...";

            setTimeout(() => {
                const res = Math.random() > 0.5 ? "正面 (Head)" : "反面 (Tail)";
                coin.innerText = res === "正面 (Head)" ? "H" : "T";
                // Color change
                coin.style.backgroundColor = res === "正面 (Head)" ? "#fbbf24" : "#e5e7eb";
                coin.style.borderColor = res === "正面 (Head)" ? "#d97706" : "#9ca3af";
                coin.style.color = res === "正面 (Head)" ? "#b45309" : "#4b5563";
                resEl.innerText = res;
            }, 500);
        }

        // RNG
        function genNumber() {
            const min = parseInt(document.getElementById('min').value);
            const max = parseInt(document.getElementById('max').value);
            const el = document.getElementById('rng-result');

            // Animation effect
            let i = 0;
            const interval = setInterval(() => {
                el.innerText = Math.floor(Math.random() * (max - min + 1)) + min;
                i++;
                if (i > 10) {
                    clearInterval(interval);
                    const final = Math.floor(Math.random() * (max - min + 1)) + min;
                    el.innerText = final;
                }
            }, 50);
        }

        // Draw
        function drawItem() {
            const input = document.getElementById('draw-options').value;
            const display = document.getElementById('draw-display');
            const items = input.split(/[,，\n]/).map(s => s.trim()).filter(s => s);

            if (items.length === 0) {
                display.innerText = "请输入选项";
                return;
            }

            let i = 0;
            const interval = setInterval(() => {
                display.innerText = items[Math.floor(Math.random() * items.length)];
                i++;
                if (i > 15) {
                    clearInterval(interval);
                    const winner = items[Math.floor(Math.random() * items.length)];
                    display.innerText = winner;
                    display.classList.add('text-emerald-600', 'scale-110');
                    setTimeout(() => display.classList.remove('text-emerald-600', 'scale-110'), 500);
                }
            }, 50);
        }
    </script>
</body>

</html>