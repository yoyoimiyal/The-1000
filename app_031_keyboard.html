<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>键盘按键测试</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .key-active {
            transform: scale(0.95);
            background-color: #3b82f6 !important;
            /* blue-500 */
            color: white !important;
            border-color: #2563eb !important;
            /* blue-600 */
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.5);
        }

        .key-history {
            animation: slideIn 0.2s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-slate-900 text-slate-300 min-h-screen flex flex-col items-center p-6">

    <div class="w-full max-w-4xl">

        <header class="flex justify-between items-center mb-8 pb-4 border-b border-slate-700">
            <h1 class="text-2xl font-bold text-white flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                Keyboard Test
            </h1>
            <a href="./navigation.html" class="text-sm hover:text-white transition">退出</a>
        </header>

        <!-- Main Display -->
        <div
            class="bg-slate-800 rounded-2xl p-8 text-center mb-8 shadow-xl min-h-[200px] flex flex-col items-center justify-center">
            <div id="idle-msg" class="text-slate-500 text-lg animate-pulse">
                按下键盘上的任意键开始测试...
            </div>

            <div id="active-info" class="hidden w-full">
                <div class="text-8xl font-bold text-white mb-4" id="main-key">A</div>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm w-full max-w-2xl mx-auto">
                    <div class="bg-slate-700 p-3 rounded-lg">
                        <span class="block text-slate-400 text-xs uppercase">event.code</span>
                        <span class="font-mono text-emerald-400 font-bold" id="info-code">KeyA</span>
                    </div>
                    <div class="bg-slate-700 p-3 rounded-lg">
                        <span class="block text-slate-400 text-xs uppercase">event.key</span>
                        <span class="font-mono text-emerald-400 font-bold" id="info-key">a</span>
                    </div>
                    <div class="bg-slate-700 p-3 rounded-lg">
                        <span class="block text-slate-400 text-xs uppercase">event.which</span>
                        <span class="font-mono text-emerald-400 font-bold" id="info-which">65</span>
                    </div>
                    <div class="bg-slate-700 p-3 rounded-lg">
                        <span class="block text-slate-400 text-xs uppercase">Location</span>
                        <span class="font-mono text-emerald-400 font-bold" id="info-location">Standard</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Log -->
        <div class="bg-slate-800 rounded-2xl p-6 shadow-lg">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-sm font-bold uppercase text-slate-500">按键历史 (History)</h2>
                <button onclick="clearHistory()"
                    class="text-xs text-slate-400 hover:text-red-400 transition">清空</button>
            </div>
            <div class="flex flex-wrap gap-2 overflow-hidden" id="history-container">
                <!-- Logs -->
            </div>
        </div>

    </div>

    <script>
        const idleMsg = document.getElementById('idle-msg');
        const activeInfo = document.getElementById('active-info');
        const mainKey = document.getElementById('main-key');
        const infoCode = document.getElementById('info-code');
        const infoKey = document.getElementById('info-key');
        const infoWhich = document.getElementById('info-which');
        const infoLocation = document.getElementById('info-location');
        const historyContainer = document.getElementById('history-container');

        const locations = ['Standard', 'Left', 'Right', 'Numpad'];

        document.addEventListener('keydown', (e) => {
            e.preventDefault(); // Prevent default browser actions like F5 refresh or scrolling

            idleMsg.classList.add('hidden');
            activeInfo.classList.remove('hidden');

            // Update Info
            mainKey.innerText = e.key === ' ' ? 'Space' : e.key.toUpperCase();
            infoCode.innerText = e.code;
            infoKey.innerText = e.key;
            infoWhich.innerText = e.which;
            infoLocation.innerText = locations[e.location] || 'Unknown';

            // Add to History
            addToHistory(e.code, e.key);
        });

        function addToHistory(code, key) {
            const el = document.createElement('div');
            el.className = 'key-history px-3 py-1 bg-slate-700 rounded text-sm font-mono text-white border border-slate-600';
            el.innerText = key === ' ' ? 'Space' : key;

            // Limit history
            if (historyContainer.children.length > 20) {
                historyContainer.removeChild(historyContainer.lastChild);
            }
            historyContainer.prepend(el);
        }

        function clearHistory() {
            historyContainer.innerHTML = '';
            idleMsg.classList.remove('hidden');
            activeInfo.classList.add('hidden');
        }
    </script>
</body>

</html>