<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰∫îÂ≠êÊ£ã</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .board {
            width: 320px;
            height: 320px;
            background-color: #eab308;
            /* Wood color */
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            padding: 10px;
            border: 2px solid #713f12;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .cell {
            position: relative;
            cursor: pointer;
        }

        /* Grid lines */
        .cell::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 1px;
            background: #713f12;
        }

        .cell::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            height: 100%;
            width: 1px;
            background: #713f12;
        }

        .piece {
            width: 80%;
            height: 80%;
            border-radius: 50%;
            position: absolute;
            top: 10%;
            left: 10%;
            z-index: 10;
            box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .black {
            background: radial-gradient(circle at 30% 30%, #666, #000);
        }

        .white {
            background: radial-gradient(circle at 30% 30%, #fff, #ddd);
        }

        .last-move::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4px;
            height: 4px;
            background: red;
            border-radius: 50%;
            z-index: 20;
        }
    </style>
</head>

<body class="bg-stone-100 min-h-screen flex flex-col items-center justify-center p-4 select-none">

    <div class="mb-6 flex justify-between w-[320px] items-end">
        <div>
            <h1 class="text-2xl font-bold text-stone-800">GOMOKU</h1>
            <p class="text-xs text-stone-500">Five in a Row</p>
        </div>
        <div class="text-sm font-bold" id="status">
            Current: <span class="text-black">Black</span>
        </div>
    </div>

    <div class="board" id="board">
        <!-- 15x15 Cells -->
    </div>

    <div class="mt-8 flex gap-4">
        <button onclick="initGame()"
            class="bg-stone-800 text-white px-6 py-2 rounded-full font-bold shadow hover:bg-stone-700 transition text-sm">
            Restart
        </button>
        <a href="./navigation.html"
            class="bg-white border border-stone-300 text-stone-600 px-6 py-2 rounded-full font-bold transition text-sm hover:bg-stone-50">Exit</a>
    </div>

    <script>
        const boardEl = document.getElementById('board');
        const statusEl = document.getElementById('status');
        const size = 15;
        let board = [];
        let currentPlayer = 1; // 1=Black, 2=White
        let gameOver = false;
        let lastMove = null;

        function initGame() {
            boardEl.innerHTML = '';
            board = Array(size).fill().map(() => Array(size).fill(0));
            currentPlayer = 1;
            gameOver = false;
            lastMove = null;
            updateStatus();

            for (let r = 0; r < size; r++) {
                for (let c = 0; c < size; c++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.dataset.r = r;
                    cell.dataset.c = c;
                    cell.onclick = () => placePiece(r, c, cell);
                    boardEl.appendChild(cell);
                }
            }
        }

        function placePiece(r, c, el) {
            if (gameOver || board[r][c] !== 0) return;

            board[r][c] = currentPlayer;

            const piece = document.createElement('div');
            piece.className = `piece ${currentPlayer === 1 ? 'black' : 'white'}`;
            el.appendChild(piece);

            // Mark last move
            if (lastMove) lastMove.classList.remove('last-move');
            piece.classList.add('last-move');
            lastMove = piece;

            if (checkWin(r, c)) {
                statusEl.innerHTML = `üèÜ <span class="${currentPlayer === 1 ? 'text-black' : 'text-slate-400'}">${currentPlayer === 1 ? 'Black' : 'White'} Wins!</span>`;
                gameOver = true;
                setTimeout(() => alert(`${currentPlayer === 1 ? 'Black' : 'White'} Wins!`), 100);
            } else {
                currentPlayer = currentPlayer === 1 ? 2 : 1;
                updateStatus();
            }
        }

        function updateStatus() {
            if (gameOver) return;
            const color = currentPlayer === 1 ? 'Black' : 'White';
            const cls = currentPlayer === 1 ? 'text-black' : 'text-slate-400';
            statusEl.innerHTML = `Current: <span class="${cls} font-black">${color}</span>`;
        }

        function checkWin(r, c) {
            const p = board[r][c];
            return checkDir(r, c, 1, 0, p) || // Horizontal
                checkDir(r, c, 0, 1, p) || // Vertical
                checkDir(r, c, 1, 1, p) || // Diag \
                checkDir(r, c, 1, -1, p);  // Diag /
        }

        function checkDir(r, c, dr, dc, p) {
            let count = 1;
            // Check forward
            for (let i = 1; i < 5; i++) {
                const nr = r + i * dr;
                const nc = c + i * dc;
                if (nr < 0 || nr >= size || nc < 0 || nc >= size || board[nr][nc] !== p) break;
                count++;
            }
            // Check backward
            for (let i = 1; i < 5; i++) {
                const nr = r - i * dr;
                const nc = c - i * dc;
                if (nr < 0 || nr >= size || nc < 0 || nc >= size || board[nr][nc] !== p) break;
                count++;
            }
            return count >= 5;
        }

        initGame();
    </script>
</body>

</html>